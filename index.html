<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ (–±–µ–∑ 3D) ‚Äî –º–æ–±–∏–ª—å–Ω–∞—è</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

  <style>
    :root{
      --bg:#f6f8fb; --card:#ffffff; --accent:#0b74de; --ok:#2e7d32; --bad:#c62828; --muted:#6b7280;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:var(--bg);color:#111}
    .wrap{max-width:760px;margin:0 auto;padding:18px}
    header{display:flex;gap:12px;align-items:center;margin-bottom:12px}
    h1{font-size:1.1rem;margin:0}
    .progress{margin-left:auto;color:var(--muted);font-size:.95rem}
    .card{background:var(--card);border-radius:12px;padding:14px;box-shadow:0 6px 18px rgba(17,24,39,0.06)}
    .question-number{font-size:.9rem;color:var(--muted);margin-bottom:6px}
    .question{font-weight:600;font-size:1.05rem;margin-bottom:12px}
    .options{display:grid;gap:8px}
    .option{padding:12px;border-radius:10px;border:1px solid #e6eef8;background:#fff;text-align:left;cursor:pointer;font-size:.98rem}
    .option:active{transform:translateY(1px)}
    .option.correct{background:#dff0df;border-color:var(--ok);color:#0b3f18}
    .option.wrong{background:#ffe1e1;border-color:var(--bad);color:#5b1212}
    .hidden{display:none}
    .center{display:flex;gap:8px;align-items:center;justify-content:center}
    footer{margin-top:14px;color:var(--muted);font-size:.9rem;text-align:center}
    .btn{display:inline-block;padding:10px 14px;border-radius:10px;border:none;background:var(--accent);color:#fff;font-weight:600;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(11,116,222,0.12)}
    .small{font-size:.88rem;color:var(--muted)}
    @media (max-width:420px){ .question{font-size:1rem} }
    
     /* üíú AR / 3D –ø–∞–Ω–µ–ª—å */
    .ar-panel{margin-top:12px}
    model-viewer{width:100%;height:300px;border-radius:12px;}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ ‚Äî AR/3D</h1>
      <div class="progress" id="progress">–ë–ª–æ–∫ 1 / 6</div>
    </header>

    <!-- Quiz card -->
    <div id="quiz" class="card">
      <div class="question-number" id="q-info">–í–æ–ø—Ä–æ—Å 1 –∏–∑ 4</div>
      <div class="question" id="q-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
      <div class="options" id="options"></div>

      <div class="stats" id="stats" style="margin-top:12px">
        <div class="chip">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –≤ –±–ª–æ–∫–µ: <span id="block-correct">0</span></div>
        <div class="chip">–í—Å–µ–≥–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö: <span id="total-correct">0</span></div>
      </div>
    </div>

   <!-- üíú AR / 3D –ø–∞–Ω–µ–ª—å -->
<div id="ar-panel" class="card hidden ar-panel">
  <!-- –∑–∞–≥–æ–ª–æ–≤–æ–∫ –±–ª–æ–∫–∞ -->
  <h2 id="ar-title" style="margin:0 0 8px 0;font-size:1rem;text-align:center"></h2>

  <!-- 3D –º–æ–¥–µ–ª—å -->
 <model-viewer
  src="models/block1.glb"
  ios-src="models/block1.usdz"
  alt="3D –º–æ–¥–µ–ª—å"
  ar
  ar-modes="scene-viewer webxr quick-look"
  auto-rotate
  camera-controls
  style="width:100%; height:300px; border-radius:12px;">
</model-viewer>


  <!-- —Å–æ–æ–±—â–µ–Ω–∏–µ -->
  <div id="ar-msg" style="margin-top:10px;text-align:center;font-size:.9rem;color:#444"></div>

  <div style="margin-top:10px;text-align:center">
    <button id="continue-btn" class="btn">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
  </div>
</div>


    <!-- Final screen -->
    <footer id="final" class="hidden">
      <div class="card center" style="flex-direction:column;gap:10px;padding:18px">
        <div id="final-text" style="font-weight:700">–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ‚Äî —Å–ø–∞—Å–∏–±–æ!</div>
        <div class="small">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –≤—Å–µ–≥–æ: <span id="final-total">0</span></div>
        <div style="display:flex;gap:8px">
          <button id="restart" class="btn">–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å</button>
        </div>
      </div>
    </footer>
  </div>

<script>
/*
  –ù–∞—Å—Ç—Ä–æ–π–∫–∏/–¥–∞–Ω–Ω—ã–µ:
  - 6 –±–ª–æ–∫–æ–≤ –ø–æ 4 –≤–æ–ø—Ä–æ—Å–∞ (–º–æ–∂–Ω–æ –ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç—ã –Ω–∏–∂–µ)
  - –ö–æ–≥–¥–∞ –ø–æ–∑–∂–µ –¥–æ–±–∞–≤–∏—à—å 3D –º–æ–¥–µ–ª–∏, –ø–æ–ª–æ–∂–∏ –∏—Ö –≤ /models/block1.glb ... block6.glb
*/
const blocks = [
  { title:'–ë–ª–æ–∫ 1', model:'models/block1.glb', questions:[
      {q:'–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è ‚Ä®–Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ª—é–¥–µ–π, ‚Ä®–±—ã—Ç –∏ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚Ä®–∫–æ—Ç–æ—Ä—ã—Ö —Å–≤—è–∑–∞–Ω–∞ ‚Ä®—Å –º–æ—Ä–µ–º??', options:['–ö–∞—Ä–µ–ª—ã','–ü–æ–º–æ—Ä—ã','–°–∞–∞–º—ã','–ö–æ–º–∏'], answer:1},
      {q:'?', options:['3','4','','6'], answer:1},
      {q:'?', options:['–§–∏–æ–ª–µ—Ç–æ–≤—ã–π','–ó–µ–ª—ë–Ω—ã–π','–û—Ä–∞–Ω–∂–µ–≤—ã–π','–ß—ë—Ä–Ω—ã–π'], answer:1},
      {q:'?', options:['–ó–µ–º–ª—è','–ú–∞—Ä—Å','–ú–µ—Ä–∫—É—Ä–∏–π','–í–µ–Ω–µ—Ä–∞'], answer:2}
  ]},
  { title:'–ë–ª–æ–∫ 2', model:'models/block2.glb', questions:[
      {q:'–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–ª–∏—Å—å –ª–æ–¥–∫–∏ ‚Ä®–ø–æ–º–æ—Ä–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω–∏ ‚Ä®—É–ø–ª—ã–ª–∏ –æ—Ç —Å—Ç–∞—Ä–∏–∫–∞?', options:['–î—Ä–∞–∫–∫–∞—Ä—ã','–ë–∞–π–¥–∞—Ä–∫–∏','–ö–æ—á–∏','–£–º–∏–∞–∫–∏'], answer:2},
      {q:'?', options:['–ö–∏—Å–ª–æ—Ä–æ–¥','–ê–∑–æ—Ç','–í–æ–¥–æ—Ä–æ–¥','CO‚ÇÇ'], answer:0},
      {q:'?', options:['2023','2024','2025','2026'], answer:1},
      {q:'?', options:['3','4','5','6'], answer:1}
  ]},
  { title:'–ë–ª–æ–∫ 3', model:'models/block3.glb', questions:[
      {q:'–ß—Ç–æ –ø–æ–º–æ—Ä—ã —Å—Ç–∞–≤–∏–ª–∏ –Ω–∞ –±–µ—Ä–µ–≥—É –º–æ—Ä—è, —á—Ç–æ–±—ã –º–æ—Ä—è–∫–∏ –Ω–µ –ø–æ—Ç–µ—Ä—è–ª–∏—Å—å?', options:['–ú–∞—è–∫','–ö—Ä–µ—Å—Ç—ã-–æ—Ä–∏–µ–Ω—Ç–∏—Ä—ã','–ö–æ—Å—Ç–µ—Ä','–°—Ç–æ–ª–±'], answer:1},
      {q:'?', options:['–°—Ç—Ä—É–∫—Ç—É—Ä–æ–π','–î–∞–Ω–Ω—ã–º–∏','–°—Ç–∏–ª–µ–º','–°–µ—Ä–≤–µ—Ä–æ–º'], answer:2},
      {q:'?', options:['JavaScript','JustScript','JorgeScript','JointScript'], answer:0},
      {q:'?', options:['–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—á—Ç—É','–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç 3D','–ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä','–†–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç –≤–∏–¥–µ–æ'], answer:1}
  ]},
  { title:'–ë–ª–æ–∫ 4', model:'models/block4.glb', questions:[
      {q:'–ß—Ç–æ –±—Ä–∞–ª–∏ —Å —Å–æ–±–æ–π ‚Ä®–≤ –ø–ª–∞–≤–∞–Ω–∏–µ –ø–æ–º–æ—Ä—ã?', options:['—è–≥–æ–¥—ã, —Å–æ–ª—å, —Ä—ã–±—ã','–∫–æ–Ω—Ñ–µ—Ç–∫–∏, ','—à–æ–∫–æ–ª–∞–¥–∫–∏, —Å—É—Ñ–ª–µ','–º–∞–Ω–≥–æ, –∞–≤–æ–∫–∞–¥–æ'], answer:0},
      {q:'?', options:['5','6','7','8'], answer:2},
      {q:'?', options:['–ö–æ—Ä–µ–Ω—å','–°—Ç–µ–±–µ–ª—å','–õ–∏—Å—Ç','–¶–≤–µ—Ç–æ–∫'], answer:2},
      {q:'?', options:['–ö2','–≠–≤–µ—Ä–µ—Å—Ç','–ú–∞–∫-–ö–∏–Ω–ª–∏','–ö–∏–ª–∏–º–∞–Ω–¥–∂–∞—Ä–æ'], answer:1}
  ]},
  { title:'–ë–ª–æ–∫ 5', model:'models/block5.glb', questions:[
      {q:'?', options:['<p>','<h1>','<div>','<span>'], answer:1},
      {q:'?', options:['<a>','<link>','<href>','<url>'], answer:0},
      {q:'?', options:['ar','xr','vr','mode'], answer:0},
      {q:'?', options:['–¢–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç','–ë–∏–Ω–∞—Ä–Ω—ã–π glTF','–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ','–ê—É–¥–∏–æ—Ñ–∞–π–ª'], answer:1}
  ]},
  { title:'–ë–ª–æ–∫ 6', model:'models/block6.glb', questions:[
      {q:'–ß—Ç–æ —Ç–∞–∫–æ–µ ¬´–ø–æ–ª—è—Ä–Ω—ã–π –¥–µ–Ω—å¬ª?', options:['–ö–æ–≥–¥–∞ –ª—É–Ω–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–æ–ª–Ω—Ü–µ','–ö–æ–≥–¥–∞ –¥–µ–Ω—å –¥–ª–∏—Ç—Å—è –≤—Å–µ–≥–æ –ø—è—Ç—å —á–∞—Å–æ–≤','–ö–æ–≥–¥–∞ –≤—Å–µ –¥–µ—Ç–∏ –æ—Ç–¥—ã—Ö–∞—é—Ç –æ—Ç —à–∫–æ–ª—ã','–ö–æ–≥–¥–∞ —Å–æ–ª–Ω—Ü–µ –Ω–µ –∑–∞—Ö–æ–¥–∏—Ç –∑–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç –∏ —Å–≤–µ—Ç–∏—Ç –∫—Ä—É–≥–ª—ã–µ —Å—É—Ç–∫–∏'], answer:3},
      {q:'–ß—Ç–æ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –≤ –Ω–µ–±–µ –Ω–∞ –†—É—Å—Å–∫–æ–º –°–µ–≤–µ—Ä–µ?', options:['—Å–µ–≤–µ—Ä–Ω–æ–µ —Å–∏—è–Ω–∏–µ','—Å–∞–ª—é—Ç—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å','—Ä–∞–¥—É–≥–∏ –∑–∏–º–æ–π','—Å–º–µ—Ä—á'], answer:0},
      {q:'–ö–∞–∫–∏–µ –∂–∏–≤–æ—Ç–Ω—ã–µ –ø–æ–º–æ–≥–∞–ª–∏ –ª—é–¥—è–º –≤—ã–∂–∏–≤–∞—Ç—å –Ω–∞ –°–µ–≤–µ—Ä–µ?', options:['–ª–æ—à–∞–¥–∏','–∫—Ä–æ–∫–æ–¥–∏–ª—ã','–æ–ª–µ–Ω–∏','–º–µ–¥–≤–µ–¥–∏'], answer:1},
      {q:'–ü–æ—á–µ–º—É –Ω–∞ –°–µ–≤–µ—Ä–µ –¥–ª–∏–Ω–Ω—ã–µ –∑–∏–º—ã –∏ –∫–æ—Ä–æ—Ç–∫–æ–µ –ª–µ—Ç–æ?', options:['–ü–æ—Ç–æ–º—É —á—Ç–æ —Å–æ–ª–Ω—Ü–µ —Ä–µ–¥–∫–æ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –≤—ã—Å–æ–∫–æ –Ω–∞–¥ –≥–æ—Ä–∏–∑–æ–Ω—Ç–æ–º','–ü–æ—Ç–æ–º—É —á—Ç–æ –≤—Å–µ–≥–¥–∞ —Ö–æ–ª–æ–¥–Ω–æ','–ü–æ—Ç–æ–º—É —á—Ç–æ —á–∞—Å—ã –ø–µ—Ä–µ–≤–æ–¥—è—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ'], answer:0}
  ]}
];

let currentBlock = 0;
let currentQuestion = 0;
let answered = false;
let totalCorrect = 0;
let blockCorrect = 0;

const qInfo = document.getElementById('q-info');
const qText = document.getElementById('q-text');
const optionsEl = document.getElementById('options');
const progress = document.getElementById('progress');
const quiz = document.getElementById('quiz');
const arPanel = document.getElementById('ar-panel');
const modelViewer = document.getElementById('model-viewer');
const arMsg = document.getElementById('ar-msg');
const continueBtn = document.getElementById('continue-btn');
const final = document.getElementById('final');
const restart = document.getElementById('restart');
const blockCorrectEl = document.getElementById('block-correct');
const totalCorrectEl = document.getElementById('total-correct');
const finalTotal = document.getElementById('final-total');

function renderQuestion(){
  const block = blocks[currentBlock];
  const q = block.questions[currentQuestion];
  progress.textContent = `–ë–ª–æ–∫ ${currentBlock+1} / ${blocks.length}`;
  qInfo.textContent = `–í–æ–ø—Ä–æ—Å ${currentQuestion+1} –∏–∑ ${block.questions.length}`;
  qText.textContent = q.q;
  optionsEl.innerHTML = '';
  q.options.forEach((opt, idx)=>{
    const b = document.createElement('button');
    b.className = 'option';
    b.type = 'button';
    b.textContent = opt;
    b.addEventListener('click', ()=>selectOption(idx, b));
    optionsEl.appendChild(b);
  });
  // –æ–±–Ω–æ–≤–∏—Ç—å —Å—á–µ—Ç—á–∏–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
  blockCorrectEl.textContent = blockCorrect;
  totalCorrectEl.textContent = totalCorrect;
}

function selectOption(idx, btn){
  if(answered) return;
  answered = true;
  const block = blocks[currentBlock];
  const q = block.questions[currentQuestion];
  const children = Array.from(optionsEl.children);
  children.forEach((el, i)=>{
    if(i === q.answer) el.classList.add('correct');
    if(i === idx && i !== q.answer) el.classList.add('wrong');
    el.disabled = true;
  });

  // –æ–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏ –µ—Å–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
  if(idx === q.answer){
    totalCorrect++;
    blockCorrect++;
    blockCorrectEl.textContent = blockCorrect;
    totalCorrectEl.textContent = totalCorrect;
  }

  // —á–µ—Ä–µ–∑ –∫–æ—Ä–æ—Ç–∫—É—é –ø–∞—É–∑—É ‚Äî —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å –∏–ª–∏ AR-–ø–∞–Ω–µ–ª—å
  setTimeout(()=>{
    if(currentQuestion < block.questions.length - 1){
      currentQuestion++;
      answered = false;
      renderQuestion();
      window.scrollTo({top:0,behavior:'smooth'});
    } else {
      // –∫–æ–Ω–µ—Ü –±–ª–æ–∫–∞ ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å AR / placeholder
      showARForBlock(currentBlock);
    }
  }, 700);
}

function showARForBlock(blockIndex){
  quiz.classList.add('hidden');
  arPanel.classList.remove('hidden');
  const b = blocks[blockIndex];
  arTitle.textContent = `–ë–ª–æ–∫ ${blockIndex+1} ‚Äî ${b.title}`;
  arMsg.textContent = `–ë–ª–æ–∫ ${blockIndex+1} –∑–∞–≤–µ—Ä—à—ë–Ω. –ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –≤ –±–ª–æ–∫–µ: ${blockCorrect}. –ù–∞–∂–º–∏ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å" —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –¥–∞–ª—å—à–µ.`;
  modelViewer.src = b.model;
  window.scrollTo({top:0,behavior:'smooth'});
}

continueBtn.addEventListener('click', ()=>{
  arPanel.classList.add('hidden');
  currentBlock++;
  if(currentBlock >= blocks.length){
    showFinal();
  } else {
    // —Å–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞ –±–ª–æ–∫–∞
    blockCorrect = 0;
    currentQuestion = 0;
    answered = false;
    quiz.classList.remove('hidden');
    renderQuestion();
  }
});

function showFinal(){
  quiz.classList.add('hidden');
  arPanel.classList.add('hidden');
  final.classList.remove('hidden');
  finalTotal.textContent = totalCorrect;
  document.getElementById('final-text').textContent = `–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: ${totalCorrect}`;
}

restart.addEventListener('click', ()=>{
  // —Å–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
  currentBlock = 0;
  currentQuestion = 0;
  answered = false;
  totalCorrect = 0;
  blockCorrect = 0;
  final.classList.add('hidden');
  quiz.classList.remove('hidden');
  renderQuestion();
  window.scrollTo({top:0,behavior:'smooth'});
});

// —Å—Ç–∞—Ä—Ç
renderQuestion();
</script>
</body>
</html>
